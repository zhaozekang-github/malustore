"use strict";(self["webpackChunkvue3_newbee"]=self["webpackChunkvue3_newbee"]||[]).push([[915],{8385:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(6252),s=n(3577),r=n(2201);const o=e=>((0,a.dD)("data-v-b560eeda"),e=e(),(0,a.Cn)(),e),d={class:"simple-header van-hairline--bottom"},i={key:1},u={class:"simple-header-name"},c=o((()=>(0,a._)("i",{class:"nbicon nbmore"},null,-1)));var l={__name:"SimpleHeader",props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},setup(e){const t=(0,r.tv)(),n=()=>{t.go(-1)};return(t,r)=>((0,a.wg)(),(0,a.iD)("header",d,[t.isback?((0,a.wg)(),(0,a.iD)("i",i,"      ")):((0,a.wg)(),(0,a.iD)("i",{key:0,class:"nbicon nbfanhui",onClick:n})),(0,a._)("div",u,(0,s.zw)(e.name),1),c]))}},f=n(3744);const m=(0,f.Z)(l,[["__scopeId","data-v-b560eeda"]]);var p=m},6700:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(6252),s=n(2262),r=n(8385),o=n(781),d=n(1302),i=n(826),u=n(2201);const c={class:"address-edit-box"};var l={__name:"AddressEdit",setup(e){const t=(0,u.yj)(),n=(0,u.tv)(),l=(0,s.qj)({areaList:{province_list:{},city_list:{},county_list:{}},searchResult:[],type:"add",addressId:"",addressInfo:{},from:t.query.from});let{areaList:f,searchResult:m,type:p,addressId:v,addressInfo:b,from:y}=(0,s.BK)(l);(0,a.bv)((async()=>{let e={},n={},a={};i.sJ.getLev1().forEach((t=>{e[t.id]=t.text,i.sJ.getLev2(t.id).forEach((e=>{n[e.id]=e.text,i.sJ.getLev3(e.id).forEach((e=>a[e.id]=e.text))}))})),l.areaList.province_list=e,l.areaList.city_list=n,l.areaList.county_list=a;const{addressId:s,type:r,from:o}=t.query;if(l.addressId=s,l.type=r,l.from=o||"","edit"==r){const{data:e}=await(0,d.HQ)(s);let t="";const n=i.sJ.getLev1();Object.entries(l.areaList.county_list).forEach((([a,s])=>{if(s==e.regionName){const s=n.findIndex((e=>e.id.substr(0,2)==a.substr(0,2))),r=Object.entries(l.areaList.city_list).filter((([e,t])=>e.substr(0,4)==a.substr(0,4)))[0];n[s].text==e.provinceName&&r[1]==e.cityName&&(t=a)}})),l.addressInfo={id:e.addressId,name:e.userName,tel:e.userPhone,province:e.provinceName,city:e.cityName,county:e.regionName,addressDetail:e.detailAddress,areaCode:t,isDefault:!!e.defaultFlag}}}));const g=async e=>{console.log(e);const t={userName:e.name,userPhone:e.tel,provinceName:e.province,cityName:e.city,regionName:e.county,detailAddress:e.addressDetail,defaultFlag:e.isDefault?1:0};"edit"==l.type&&(t["addressId"]=l.addressId),"add"==await l.type?(0,d.y$)(t):(0,d.Ib)(t),(0,o.F)("保存成功"),setTimeout((()=>{n.back()}),1e3)},h=async()=>{await(0,d.Je)(l.addressId),(0,o.F)("删除成功"),setTimeout((()=>{n.back()}),1e3)};return(e,t)=>{const n=(0,a.up)("van-address-edit");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(r.Z,{name:""+("add"==(0,s.SU)(p)?"新增地址":"编辑地址")},null,8,["name"]),(0,a.Wm)(n,{class:"edit","area-list":(0,s.SU)(f),"address-info":(0,s.SU)(b),"show-delete":"edit"==(0,s.SU)(p),"show-set-default":"","show-search-result":"","search-result":(0,s.SU)(m),"area-columns-placeholder":["请选择","请选择","请选择"],onSave:g,onDelete:h},null,8,["area-list","address-info","show-delete","search-result"])])}}};const f=l;var m=f},2987:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(6252),s=n(2262),r=n(8385),o=n(5803),d=n(826);const i={class:"seting-box"},u={class:"input-item"};var c={__name:"Setting",setup(e){const t=(0,s.qj)({nickName:"",introduceSign:"",password:""});let{nickName:n,introduceSign:c,password:l}=(0,s.BK)(t);(0,a.bv)((async()=>{const{data:e}=await(0,o.bG)();t.nickName=e.nickName,t.introduceSign=e.introduceSign}));const f=async()=>{const{resultCode:e}=await(0,o.kS)();200==e&&((0,d.co)("token",""),window.location.href="/home")};return(e,t)=>{const o=(0,a.up)("van-field"),d=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r.Z,{name:"账号管理"}),(0,a._)("div",i,[(0,a._)("div",u,[(0,a.Wm)(o,{modelValue:(0,s.SU)(n),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.dq)(n)?n.value=e:n=e),label:"昵称"},null,8,["modelValue"]),(0,a.Wm)(o,{modelValue:(0,s.SU)(c),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.dq)(c)?c.value=e:c=e),label:"个性签名"},null,8,["modelValue"]),(0,a.Wm)(o,{modelValue:(0,s.SU)(l),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.dq)(l)?l.value=e:l=e),type:"password",label:"修改密码"},null,8,["modelValue"])]),(0,a.Wm)(d,{round:"",class:"save-btn",color:"#1baeae",type:"primary",onClick:e.save,block:""},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["onClick"]),(0,a.Wm)(d,{round:"",class:"save-btn",color:"#1baeae",type:"primary",onClick:f,block:""},{default:(0,a.w5)((()=>[(0,a.Uk)("退出登录")])),_:1})])],64)}}},l=n(3744);const f=(0,l.Z)(c,[["__scopeId","data-v-73ed5f3f"]]);var m=f},1302:function(e,t,n){n.d(t,{HQ:function(){return u},Ib:function(){return r},Je:function(){return o},mZ:function(){return i},oX:function(){return d},y$:function(){return s}});var a=n(8496);function s(e){return a.Z.post("/address",e)}function r(e){return a.Z.put("/address",e)}function o(e){return a.Z["delete"](`/address/${e}`)}function d(){return a.Z.get("/address/default")}function i(){return a.Z.get("/address",{pageNumber:1,pageSize:1e3})}function u(e){return a.Z.get(`/address/${e}`)}},5803:function(e,t,n){n.d(t,{bG:function(){return s},kS:function(){return o},x4:function(){return r},z2:function(){return d}});var a=n(8496);function s(){return a.Z.get("/user/info")}function r(e){return a.Z.post("/user/login",e)}function o(){return a.Z.post("/user/logout")}function d(e){return a.Z.post("/user/register",e)}}}]);
//# sourceMappingURL=address-edit.1e749a85.js.map