{"version":3,"file":"js/address-edit.1e749a85.js","mappings":"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","sources":["webpack://vue3-newbee/./src/components/SimpleHeader.vue","webpack://vue3-newbee/./src/components/SimpleHeader.vue?b208","webpack://vue3-newbee/./src/views/AddressEdit.vue","webpack://vue3-newbee/./src/views/AddressEdit.vue?b84d","webpack://vue3-newbee/./src/views/Setting.vue","webpack://vue3-newbee/./src/views/Setting.vue?e6ce","webpack://vue3-newbee/./src/service/address.js","webpack://vue3-newbee/./src/service/user.js"],"sourcesContent":["<template>\r\n  <header class=\"simple-header van-hairline--bottom\">\r\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\r\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\r\n    <div class=\"simple-header-name\">{{ name }}</div>\r\n    <i class=\"nbicon nbmore\"></i>\r\n  </header>\r\n</template>\r\n<script setup>\r\nimport { ref, defineProps } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter()\r\n\r\ndefineProps({\r\n  name: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  back: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  noback: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst goBack = () => {\r\n  router.go(-1)\r\n}\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../common/style/mixin\";\r\n\r\n.simple-header {\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0;\r\n  z-index: 10000;\r\n  .fj();\r\n  .wh(100%, 44px);\r\n  line-height: 44px;\r\n  padding: 0 10px;\r\n  .boxSizing();\r\n  color: #252525;\r\n  background: #fff;\r\n\r\n  .simple-header-name {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n.block {\r\n  height: 44px;\r\n}\r\n</style>","import script from \"./SimpleHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=b560eeda&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网页项目\\\\项目\\\\vue3-newbee\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b560eeda\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"address-edit-box\">\r\n        <s-header :name=\"`${type == 'add' ? '新增地址' : '编辑地址'}`\"></s-header>\r\n        <van-address-edit class=\"edit\" :area-list=\"areaList\" :address-info=\"addressInfo\" :show-delete=\"type == 'edit'\"\r\n            show-set-default show-search-result :search-result=\"searchResult\"\r\n            :area-columns-placeholder=\"['请选择', '请选择', '请选择']\" @save=\"onSave\" @delete=\"onDelete\" />\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { reactive, onMounted, toRefs } from \"vue\";\r\nimport sHeader from \"../components/SimpleHeader.vue\"\r\nimport { Toast } from \"vant\";\r\nimport { addAddress, EditAddress, DeleteAddress, getAddressDetail } from \"../service/address\"\r\nimport { tdist } from \"@/common/js/utils\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst state = reactive({\r\n    areaList: {\r\n        province_list: {},\r\n        city_list: {},\r\n        county_list: {},\r\n    },\r\n    searchResult: [],\r\n    type: 'add',\r\n    addressId: '',\r\n    addressInfo: {},\r\n    from: route.query.from\r\n})\r\n\r\nlet {\r\n    areaList,\r\n    searchResult,\r\n    type,\r\n    addressId,\r\n    addressInfo,\r\n    from\r\n} = toRefs(state)\r\n\r\nonMounted(async () => {\r\n    // 省市区列表构造\r\n    let _province_list = {}\r\n    let _city_list = {}\r\n    let _country_list = {}\r\n    tdist.getLev1().forEach(p => {\r\n        _province_list[p.id] = p.text\r\n        tdist.getLev2(p.id).forEach(c => {\r\n            _city_list[c.id] = c.text\r\n            tdist.getLev3(c.id).forEach(q => _country_list[q.id] = q.text)\r\n        })\r\n    })\r\n    state.areaList.province_list = _province_list\r\n    state.areaList.city_list = _city_list\r\n    state.areaList.county_list = _country_list\r\n\r\n    const { addressId, type, from } = route.query\r\n    state.addressId = addressId\r\n    state.type = type\r\n    state.from = from || ''\r\n    if (type == 'edit') {\r\n        const { data: addressDetail } = await getAddressDetail(addressId)\r\n        let _areaCode = ''\r\n        const province = tdist.getLev1()\r\n        Object.entries(state.areaList.county_list).forEach(([id, text]) => {\r\n            // 先找到当前的区\r\n            if (text == addressDetail.regionName) {\r\n                // 找到对应的省份\r\n                const provinceIndex = province.findIndex(item => item.id.substr(0, 2) == id.substr(0, 2))\r\n                // 找到对应的市区\r\n                const cityItem = Object.entries(state.areaList.city_list).filter(([cityId, cityName]) => cityId.substr(0, 4) == id.substr(0, 4))[0]\r\n                if (province[provinceIndex].text == addressDetail.provinceName && cityItem[1] == addressDetail.cityName) {\r\n                    _areaCode = id\r\n                }\r\n            }\r\n        })\r\n\r\n        state.addressInfo = {\r\n            id: addressDetail.addressId,\r\n            name: addressDetail.userName,\r\n            tel: addressDetail.userPhone,\r\n            province: addressDetail.provinceName,\r\n            city: addressDetail.cityName,\r\n            county: addressDetail.regionName,\r\n            addressDetail: addressDetail.detailAddress,\r\n            areaCode: _areaCode,\r\n            isDefault: !!addressDetail.defaultFlag\r\n        }\r\n    }\r\n})\r\n\r\nconst onSave = async (content) => {\r\n    console.log(content);\r\n    const params = {\r\n        userName: content.name,\r\n        userPhone: content.tel,\r\n        provinceName: content.province,\r\n        cityName: content.city,\r\n        regionName: content.county,\r\n        detailAddress: content.addressDetail,\r\n        defaultFlag: content.isDefault ? 1 : 0,\r\n    }\r\n    if (state.type == 'edit') {\r\n        params['addressId'] = state.addressId\r\n    }\r\n    await state.type == 'add' ? addAddress(params) : EditAddress(params)\r\n    Toast('保存成功')\r\n    setTimeout(() => {\r\n        router.back()\r\n    }, 1000)\r\n}\r\n\r\nconst onDelete = async () => {\r\n    await DeleteAddress(state.addressId)\r\n    Toast('删除成功')\r\n    setTimeout(() => {\r\n        router.back()\r\n    }, 1000);\r\n}\r\n\r\n</script>\r\n<style lang=\"less\">\r\n@import '../common/style/mixin';\r\n\r\n.edit {\r\n    margin-top: 30px;\r\n\r\n    .van-field__body {\r\n        textarea {\r\n            height: 26px !important;\r\n        }\r\n    }\r\n}\r\n\r\n.address-edit-box {\r\n    .van-address-edit {\r\n        .van-button--danger {\r\n            background: @primary;\r\n            border-color: @primary;\r\n        }\r\n\r\n        .van-switch--on {\r\n            background: @primary;\r\n        }\r\n    }\r\n}\r\n</style>","import script from \"./AddressEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddressEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AddressEdit.vue?vue&type=style&index=0&id=1a2e11f2&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <s-header :name=\"'账号管理'\"></s-header>\r\n    <div class=\"seting-box\">\r\n\r\n        <div class=\"input-item\">\r\n            <van-field v-model=\"nickName\" label=\"昵称\" />\r\n            <van-field v-model=\"introduceSign\" label=\"个性签名\" />\r\n            <van-field v-model=\"password\" type='password' label=\"修改密码\" />\r\n        </div>\r\n        <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"save\" block>保存</van-button>\r\n        <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"handleLogout\" block>退出登录</van-button>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { reactive, onMounted, toRefs } from 'vue'\r\nimport sHeader from \"../components/SimpleHeader.vue\"\r\nimport { getUserInfo, logout } from '@/service/user';\r\nimport { setLocal } from '@/common/js/utils';\r\nimport { Toast } from 'vant';\r\n\r\nconst state = reactive({\r\n    nickName: '',\r\n    introduceSign: '',\r\n    password: ''\r\n})\r\n\r\nlet {\r\n    nickName,\r\n    introduceSign,\r\n    password\r\n} = toRefs(state)\r\n\r\nonMounted(async () => {\r\n    const { data } = await getUserInfo()\r\n    state.nickName = data.nickName\r\n    state.introduceSign = data.introduceSign\r\n})\r\n\r\n// 退出登录\r\nconst handleLogout = async () => {\r\n    const { resultCode } = await logout()\r\n    if (resultCode == 200) {\r\n        setLocal('token', '')\r\n        window.location.href = '/home'\r\n    }\r\n}\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.seting-box {\r\n    margin-top: 50px;\r\n\r\n    .save-btn {\r\n        width: 80%;\r\n        margin: 20px auto;\r\n    }\r\n}\r\n</style>","import script from \"./Setting.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Setting.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Setting.vue?vue&type=style&index=0&id=73ed5f3f&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网页项目\\\\项目\\\\vue3-newbee\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-73ed5f3f\"]])\n\nexport default __exports__","/**\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n */\n\nimport axios from '../utils/axios'\n\nexport function addAddress(params) {\n  return axios.post('/address', params);\n}\n\nexport function EditAddress(params) {\n  return axios.put('/address', params);\n}\n\nexport function DeleteAddress(id) {\n  return axios.delete(`/address/${id}`);\n}\n\nexport function getDefaultAddress() {\n  return axios.get('/address/default');\n}\n\nexport function getAddressList() {\n  return axios.get('/address', { pageNumber: 1, pageSize: 1000 })\n}\n\nexport function getAddressDetail(id) {\n  return axios.get(`/address/${id}`)\n}\n\n\n","import axios from \"@/utils/axios\";\r\n\r\nexport function getUserInfo() {\r\n    return axios.get('/user/info')\r\n}\r\n\r\n// 登录\r\nexport function login(params) {\r\n    return axios.post('/user/login', params)\r\n}\r\n\r\n// 登出\r\nexport function logout() {\r\n    return axios.post('/user/logout')\r\n}\r\n\r\n//注册\r\nexport function register(params) {\r\n    return axios.post('/user/register', params)\r\n}"],"names":["router","goBack","go","__exports__","route","state","areaList","province_list","city_list","county_list","searchResult","type","addressId","addressInfo","from","query","async","_province_list","_city_list","_country_list","forEach","p","id","text","c","q","data","addressDetail","_areaCode","province","Object","entries","regionName","provinceIndex","findIndex","item","substr","cityItem","filter","cityId","cityName","provinceName","name","userName","tel","userPhone","city","county","detailAddress","areaCode","isDefault","defaultFlag","onSave","content","console","log","params","setTimeout","back","onDelete","nickName","introduceSign","password","handleLogout","resultCode","window","location","href","addAddress","EditAddress","DeleteAddress","getDefaultAddress","getAddressList","pageNumber","pageSize","getAddressDetail","getUserInfo","login","logout","register"],"sourceRoot":""}