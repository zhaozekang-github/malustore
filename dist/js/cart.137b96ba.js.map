{"version":3,"file":"js/cart.137b96ba.js","mappings":"8gBAWA,MAAMA,GAAS,UAiBTC,EAAS,KACbD,EAAOE,IAAI,EAAC,E,uNCvBd,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,qmBCuCA,MAAMH,GAAS,UACTI,GAAQ,QAAS,CACrBC,SAAS,EACTC,KAAM,GACNC,KAAK,EACLC,OAAQ,GACRC,UAAU,IAIZ,IAAI,QACFJ,EAAO,KACPC,EAAI,IACJC,EAAG,OACHC,EAAM,SACNC,IACE,QAAOL,IAEX,SAAU,KACRM,GAAK,IAIP,MAAMA,EAAOC,UACX,YAAc,CAAEC,QAAS,SAAUC,aAAa,IAChD,MAAM,KAAEC,SAAe,QAAQ,CAAEC,WAAY,IAC7CX,EAAME,KAAOQ,EACbV,EAAMI,OAASM,EAAKE,KAAIC,GAAQA,EAAKC,aACrC,WAAY,EAGRC,GAAQ,SAAS,KACrB,IAAIC,EAAM,EACNC,EAAQjB,EAAME,KAAKgB,QAAOL,GAAQb,EAAMI,OAAOe,SAASN,EAAKC,cAIjE,OAHAG,EAAMG,SAAQP,IACZG,GAAOH,EAAKQ,WAAaR,EAAKS,gBAEzBN,KAGHO,EAAWhB,UACf,GAA2B,GAAvBP,EAAMI,OAAOoB,OAEf,YADA,OAAM,aAGR,MAAMC,EAASC,KAAKC,UAAU3B,EAAMI,QACpCR,EAAOgC,KAAK,CAAEC,KAAM,gBAAiBC,MAAO,CAAEC,YAAaN,IAAU,E,m6DCvFvE,MAAM1B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-newbee/./src/components/SimpleHeader.vue","webpack://vue3-newbee/./src/components/SimpleHeader.vue?b208","webpack://vue3-newbee/./src/views/Cart.vue","webpack://vue3-newbee/./src/views/Cart.vue?27b4"],"sourcesContent":["<template>\r\n  <header class=\"simple-header van-hairline--bottom\">\r\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\r\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\r\n    <div class=\"simple-header-name\">{{ name }}</div>\r\n    <i class=\"nbicon nbmore\"></i>\r\n  </header>\r\n</template>\r\n<script setup>\r\nimport { ref, defineProps } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter()\r\n\r\ndefineProps({\r\n  name: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  back: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  noback: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst goBack = () => {\r\n  router.go(-1)\r\n}\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../common/style/mixin\";\r\n\r\n.simple-header {\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0;\r\n  z-index: 10000;\r\n  .fj();\r\n  .wh(100%, 44px);\r\n  line-height: 44px;\r\n  padding: 0 10px;\r\n  .boxSizing();\r\n  color: #252525;\r\n  background: #fff;\r\n\r\n  .simple-header-name {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n.block {\r\n  height: 44px;\r\n}\r\n</style>","import script from \"./SimpleHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=b560eeda&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网页项目\\\\项目\\\\vue3-newbee\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b560eeda\"]])\n\nexport default __exports__","<template>\r\n  <s-header :name=\"'购物车'\" :noback=\"true\"></s-header>\r\n  <div class=\"cart-box\">\r\n\r\n    <div class=\"cart-body\">\r\n      <van-checkbox-group @change=\"groupChange\" v-model=\"result\" ref=\"checkboxGroup\">\r\n        <van-swipe-cell :right-width=\"50\" v-for=\"(item, index) in list\" :key=\"index\">\r\n          <div class=\"good-item\">\r\n            <van-checkbox :name=\"item.cartItemId\" />\r\n            <div class=\"good-img\"><img :src=\"$filters.prefix(item.goodsCoverImg)\" alt=\"\"></div>\r\n            <div class=\"good-desc\">\r\n              <div class=\"good-title\">\r\n                <span>{{ item.goodsName }}</span>\r\n                <span>x{{ item.goodsCount }}</span>\r\n              </div>\r\n              <div class=\"good-btn\">\r\n                <div class=\"price\">¥{{ item.sellingPrice }}</div>\r\n                <van-stepper integer :min=\"1\" :max=\"5\" :model-value=\"item.goodsCount\" :name=\"item.cartItemId\"\r\n                  async-change @change=\"onChange\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <template #right>\r\n            <van-button square icon=\"delete\" type=\"danger\" class=\"delete-button\" @click=\"deleteGood(item.cartItemId)\" />\r\n          </template>\r\n        </van-swipe-cell>\r\n      </van-checkbox-group>\r\n    </div>\r\n    <van-submit-bar v-if=\"list.length > 0\" class=\"submit-all van-hairline--top\" :price=\"total * 100\" button-text=\"结算\"\r\n      @submit=\"onSubmit\">\r\n      <van-checkbox @click=\"allCheck\" v-model:checked=\"checkAll\">全选</van-checkbox>\r\n    </van-submit-bar>\r\n    <div class=\"empty\" v-if=\"!list.length\">\r\n      <img class=\"empty-cart\" src=\"https://s.yezgea02.com/1604028375097/empty-car.png\" alt=\"空购物车\">\r\n      <div class=\"title\">购物车空空如也</div>\r\n      <van-button round color=\"#1baeae\" type=\"primary\" @click=\"goTo\" block>前往选购</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { reactive, onMounted, computed, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router';\r\nimport sHeader from '../components/SimpleHeader.vue'\r\nimport { Toast } from \"vant\"\r\nimport { getCart, deleteCartItem, modifyCart } from \"../service/cart\"\r\n\r\n\r\nconst router = useRouter()\r\nconst state = reactive({\r\n  checked: false,\r\n  list: [],\r\n  all: false,\r\n  result: [],\r\n  checkAll: true\r\n})\r\n\r\n\r\nlet {\r\n  checked,\r\n  list,\r\n  all,\r\n  result,\r\n  checkAll\r\n} = toRefs(state)\r\n\r\nonMounted(() => {\r\n  init()\r\n})\r\n\r\n// 页面初始化\r\nconst init = async () => {\r\n  Toast.loading({ message: '加载中...', forbidClick: true })\r\n  const { data } = await getCart({ pageNumber: 1 })\r\n  state.list = data\r\n  state.result = data.map(item => item.cartItemId)\r\n  Toast.clear()\r\n}\r\n\r\nconst total = computed(() => {\r\n  let sum = 0\r\n  let _list = state.list.filter(item => state.result.includes(item.cartItemId))\r\n  _list.forEach(item => {\r\n    sum += item.goodsCount * item.sellingPrice\r\n  })\r\n  return sum\r\n})\r\n\r\nconst onSubmit = async () => {\r\n  if (state.result.length == 0) {\r\n    Toast(\"请选择商品进行结算\")\r\n    return\r\n  }\r\n  const params = JSON.stringify(state.result)\r\n  router.push({ path: '/create-order', query: { cartItemIds: params } })\r\n}\r\n\r\n\r\n\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../common/style/mixin';\r\n\r\n.cart-box {\r\n  margin-top: 50px;\r\n\r\n  .cart-header {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 10000;\r\n    .fj();\r\n    .wh(100%, 44px);\r\n    line-height: 44px;\r\n    padding: 0 10px;\r\n    .boxSizing();\r\n    color: #252525;\r\n    background: #fff;\r\n    border-bottom: 1px solid #dcdcdc;\r\n\r\n    .cart-name {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n\r\n  .cart-body {\r\n    margin: 16px 0 100px 0;\r\n    padding-left: 10px;\r\n\r\n    .good-item {\r\n      display: flex;\r\n\r\n      .good-img {\r\n        img {\r\n          .wh(100px, 100px)\r\n        }\r\n      }\r\n\r\n      .good-desc {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        flex: 1;\r\n        padding: 20px;\r\n\r\n        .good-title {\r\n          display: flex;\r\n          justify-content: space-between;\r\n        }\r\n\r\n        .good-btn {\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          .price {\r\n            font-size: 16px;\r\n            color: red;\r\n            line-height: 28px;\r\n          }\r\n\r\n          .van-icon-delete {\r\n            font-size: 20px;\r\n            margin-top: 4px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .delete-button {\r\n      width: 50px;\r\n      height: 100%;\r\n    }\r\n  }\r\n\r\n  .empty {\r\n    width: 50%;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    margin-top: 200px;\r\n\r\n    .empty-cart {\r\n      width: 150px;\r\n      margin-bottom: 20px;\r\n    }\r\n\r\n    .van-icon-smile-o {\r\n      font-size: 50px;\r\n    }\r\n\r\n    .title {\r\n      font-size: 16px;\r\n      margin-bottom: 20px;\r\n    }\r\n  }\r\n\r\n  .submit-all {\r\n    margin-bottom: 50px;\r\n\r\n    .van-checkbox {\r\n      margin-left: 10px\r\n    }\r\n\r\n    .van-submit-bar__text {\r\n      margin-right: 10px\r\n    }\r\n\r\n    .van-submit-bar__button {\r\n      background: @primary;\r\n    }\r\n  }\r\n\r\n  .van-checkbox__icon--checked .van-icon {\r\n    background-color: @primary;\r\n    border-color: @primary;\r\n  }\r\n}\r\n</style>","import script from \"./Cart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=4d5e6f41&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网页项目\\\\项目\\\\vue3-newbee\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4d5e6f41\"]])\n\nexport default __exports__"],"names":["router","goBack","go","__exports__","state","checked","list","all","result","checkAll","init","async","message","forbidClick","data","pageNumber","map","item","cartItemId","total","sum","_list","filter","includes","forEach","goodsCount","sellingPrice","onSubmit","length","params","JSON","stringify","push","path","query","cartItemIds"],"sourceRoot":""}