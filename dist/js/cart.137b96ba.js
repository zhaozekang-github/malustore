"use strict";(self["webpackChunkvue3_newbee"]=self["webpackChunkvue3_newbee"]||[]).push([[511],{8385:function(e,a,t){t.d(a,{Z:function(){return p}});var l=t(6252),n=t(3577),c=t(2201);const o=e=>((0,l.dD)("data-v-b560eeda"),e=e(),(0,l.Cn)(),e),s={class:"simple-header van-hairline--bottom"},i={key:1},r={class:"simple-header-name"},d=o((()=>(0,l._)("i",{class:"nbicon nbmore"},null,-1)));var u={__name:"SimpleHeader",props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},setup(e){const a=(0,c.tv)(),t=()=>{a.go(-1)};return(a,c)=>((0,l.wg)(),(0,l.iD)("header",s,[a.isback?((0,l.wg)(),(0,l.iD)("i",i,"      ")):((0,l.wg)(),(0,l.iD)("i",{key:0,class:"nbicon nbfanhui",onClick:t})),(0,l._)("div",r,(0,n.zw)(e.name),1),d]))}},m=t(3744);const g=(0,m.Z)(u,[["__scopeId","data-v-b560eeda"]]);var p=g},5665:function(e,a,t){t.r(a),t.d(a,{default:function(){return U}});var l=t(6252),n=t(2262),c=t(3577),o=t(2201),s=t(8385),i=t(781),r=t(4273);const d=e=>((0,l.dD)("data-v-4d5e6f41"),e=e(),(0,l.Cn)(),e),u={class:"cart-box"},m={class:"cart-body"},g={class:"good-item"},p={class:"good-img"},v=["src"],h={class:"good-desc"},k={class:"good-title"},b={class:"good-btn"},_={class:"price"},f={key:1,class:"empty"},w=d((()=>(0,l._)("img",{class:"empty-cart",src:"https://s.yezgea02.com/1604028375097/empty-car.png",alt:"空购物车"},null,-1))),C=d((()=>(0,l._)("div",{class:"title"},"购物车空空如也",-1)));var y={__name:"Cart",setup(e){const a=(0,o.tv)(),t=(0,n.qj)({checked:!1,list:[],all:!1,result:[],checkAll:!0});let{checked:d,list:y,all:I,result:S,checkAll:U}=(0,n.BK)(t);(0,l.bv)((()=>{x()}));const x=async()=>{i.F.loading({message:"加载中...",forbidClick:!0});const{data:e}=await(0,r.dv)({pageNumber:1});t.list=e,t.result=e.map((e=>e.cartItemId)),i.F.clear()},D=(0,l.Fl)((()=>{let e=0,a=t.list.filter((e=>t.result.includes(e.cartItemId)));return a.forEach((a=>{e+=a.goodsCount*a.sellingPrice})),e})),q=async()=>{if(0==t.result.length)return void(0,i.F)("请选择商品进行结算");const e=JSON.stringify(t.result);a.push({path:"/create-order",query:{cartItemIds:e}})};return(e,a)=>{const t=(0,l.up)("van-checkbox"),o=(0,l.up)("van-stepper"),i=(0,l.up)("van-button"),r=(0,l.up)("van-swipe-cell"),d=(0,l.up)("van-checkbox-group"),I=(0,l.up)("van-submit-bar");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(s.Z,{name:"购物车",noback:!0}),(0,l._)("div",u,[(0,l._)("div",m,[(0,l.Wm)(d,{onChange:e.groupChange,modelValue:(0,n.SU)(S),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(S)?S.value=e:S=e),ref:"checkboxGroup"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(y),((a,n)=>((0,l.wg)(),(0,l.j4)(r,{"right-width":50,key:n},{right:(0,l.w5)((()=>[(0,l.Wm)(i,{square:"",icon:"delete",type:"danger",class:"delete-button",onClick:t=>e.deleteGood(a.cartItemId)},null,8,["onClick"])])),default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.Wm)(t,{name:a.cartItemId},null,8,["name"]),(0,l._)("div",p,[(0,l._)("img",{src:e.$filters.prefix(a.goodsCoverImg),alt:""},null,8,v)]),(0,l._)("div",h,[(0,l._)("div",k,[(0,l._)("span",null,(0,c.zw)(a.goodsName),1),(0,l._)("span",null,"x"+(0,c.zw)(a.goodsCount),1)]),(0,l._)("div",b,[(0,l._)("div",_,"¥"+(0,c.zw)(a.sellingPrice),1),(0,l.Wm)(o,{integer:"",min:1,max:5,"model-value":a.goodsCount,name:a.cartItemId,"async-change":"",onChange:e.onChange},null,8,["model-value","name","onChange"])])])])])),_:2},1024)))),128))])),_:1},8,["onChange","modelValue"])]),(0,n.SU)(y).length>0?((0,l.wg)(),(0,l.j4)(I,{key:0,class:"submit-all van-hairline--top",price:100*(0,n.SU)(D),"button-text":"结算",onSubmit:q},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{onClick:e.allCheck,checked:(0,n.SU)(U),"onUpdate:checked":a[1]||(a[1]=e=>(0,n.dq)(U)?U.value=e:U=e)},{default:(0,l.w5)((()=>[(0,l.Uk)("全选")])),_:1},8,["onClick","checked"])])),_:1},8,["price"])):(0,l.kq)("",!0),(0,n.SU)(y).length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",f,[w,C,(0,l.Wm)(i,{round:"",color:"#1baeae",type:"primary",onClick:e.goTo,block:""},{default:(0,l.w5)((()=>[(0,l.Uk)("前往选购")])),_:1},8,["onClick"])]))])],64)}}},I=t(3744);const S=(0,I.Z)(y,[["__scopeId","data-v-4d5e6f41"]]);var U=S}}]);
//# sourceMappingURL=cart.137b96ba.js.map